#summary Building companion9x for the Mac
 
= Building companion9X for OS X =

Brief notes only until I figure out how it all works -- gruvin.

= Prerequisites =

You will need ...
 * [http://developer.apple.com/xcode/index.php Xcode 4] (Apple Developer Tools)
 * [http://qt.nokia.com/ Qt] (v4)
 * [http://www.cmake.org cmake]

== Installing Xcode ==

If you're doing any source compiling or code development on your Mac, then you already have Xcode. If not, you can get started by registering at the [http://developer.apple.com/devcenter/mac/index.action Apple Developer] site. Alternatively, you can also obtain Xcode 4 from the Apple App Store.

Xcode 4 is a rather large (4GB!) download. I believe it's free for OS X development, which is what we need here. If not mistaken, you only have to pay an annual membership fee to get the iOS development library. _Somebody check me on this? I'm a paid up member, so not sure._
 
== Installing Qt ==

I used [http://www.macports.org/ MacPorts] ...

{{{
sudo port install qt4-mac
}}}

*NOTE*: At this stage, we are not set up to be able to use Qt in frameworks mode. Despite Qt's [http://doc.trolltech.com/4.7/deployment-mac.html documentation to the contrary], MacPorts does NOT in fact build the Qt-frameworks version by default. So we're OK.

== Installing CMAKE ==

MacPorts to the rescue again ...
{{{
sudo port install cmake
}}}


= Building companion9x itself =

Finally, we're ready to grab the source files and build companion9x itself.

== Check out the c9x source ==

See the [http://code.google.com/p/companion9x/source/checkout project's Source page], as provided by Googlecode.

== Prepare a Makefile using CMAKE ==

{{{
cd companion9x/trunk/src

cmake -G 'Unix Makefiles'
}}}

Finally, we're ready to compile ...

{{{
make clean && make
}}}

When the build process completes (with no show-stopping errors!) you will end up with a folder named `companion9x.app`.

You should now be able to run companion9x from your terminal, like so ...
{{{
./companion9x.app/Contents/MacOSX/companion9x
}}}

You can also locate 'companion9x' (of type Application) in Finder and double-click that to launch.

At the time of this writing, we do not yet have an icon file to make the application look pretty. I'm sure there will be one soon though.

== IMPORTANT ==

The above process does not bundle the required cross-platform, Qt run-time library files into the companion9x application bundle. Therefore, the compiled program will only run on OS X system where Qt4 has been installed _using MacPorts_. (It needs to be MacPorts rather than Fink for example, because the libraries need to be located in `/opt/local/lib`.)

We may look into changing this -- or making it an option -- in the future. But for now, not bundling the Qt files keeps the application's size much smaller and more portable -- that is, quicker to download, etc.
