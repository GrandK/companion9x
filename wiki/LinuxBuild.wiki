#summary Building companion9x for Linux
 
= Building companion9X for Linux =

= Prerequisites =

You will need ...
 * g++
 * [http://qt.nokia.com/ Qt] (v4.7.4)
 * [http://www.cmake.org cmake]
 * [http://xerces.apache.org/ Apache Xerces-C++] (v2.8.0)
 * [http://www.codesynthesis.com/projects/xsd xsdcxx]
 * [http://www.libsdl.org/ SDL] (v1.2)

On Ubuntu 11.04, 11.10:
{{{
sudo apt-get install subversion gcc-avr avr-libc avrdude build-essential ruby libqtcore4 libqt4-dev qt4-qmake g++ cmake libxerces-c-dev xsdcxx libsdl1.2-dev

}}}

On Fedora:
{{{
sudo yum install qt qt-devel cmake patch xsd svn gcc-c++ sdl-devel
}}}

= Building companion9x =

We're ready to grab the source files and build companion9x itself.

== Check out the c9x source ==

See the [http://code.google.com/p/companion9x/source/checkout project's Source page], as provided by Googlecode.

{{{
svn checkout http://companion9x.googlecode.com/svn/trunk companion9x
}}}

== Prepare a Makefile using CMake ==

{{{
cd companion9x/src

cmake .
}}}

Finally, we're ready to compile ...

{{{
make clean && make
}}}

When the build process completes (with no show-stopping errors!) you will end up with a binary named `companion9x`.

You should now be able to run companion9x from your terminal, like so ...
{{{
./companion9x
}}}

== Joystick support ==
Companion9x does support joystick for firmware simulator control.
Latest version of SDL use by default a device that cannot be calibrated properly by the OS.
To avoid problems use the following command before launching companion9x
{{{
export SDL_JOYSTICK_DEVICE=/dev/input/js0 (where js0 is your joystick / RC Sim adapter)
}}}
or write
{{{
SDL_JOYSTICK_DEVICE=/dev/input/js0
}}}
in /etc/environment

In companion9x you will have two joysticks, choose the first one.
If you experience calibration problems have a look to the jscal utility.


calibrating:
{{{
jscal -c /dev/input/js0
}}}
directory for storing:
{{{
mkdir /var/lib/joystick
}}}
store the calibration:
{{{
jscal-store /dev/input/js0
}}}